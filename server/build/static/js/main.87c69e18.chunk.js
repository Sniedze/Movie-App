(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,a){e.exports={menu:"Navigation_menu__2B_Ec",a:"Navigation_a__2rx-L",active:"Navigation_active__RCiQF",logoutA:"Navigation_logoutA__1BuCM"}},17:function(e,t,a){e.exports={movies:"Home_movies__2ygiD",li:"Home_li__1hHk8",h4:"Home_h4__3QM-n"}},19:function(e,t,a){e.exports={search_container:"Search_search_container__3j7mh",input:"Search_input__1CP8V",button:"Search_button__1zIIq"}},23:function(e,t,a){e.exports={container:"Login_container__2ubcz",error:"Login_error__2szsq"}},38:function(e,t,a){e.exports=a(68)},43:function(e,t,a){},44:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),o=a.n(c),s=(a(43),a(1)),l=(a(44),a(5)),i=a(3),u=a(37),m=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},d=a(2),p=a.n(d),h=a(36),v=a(6),f=a(17),b=a.n(f),E=a(14),g=a.n(E),_="http://localhost:8080/",w=function(){var e=Object(v.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"".concat(_,"users/login"),method:"POST",headers:{"Content-Type":"application/json"},data:{username:t,password:a}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(v.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(_,"allmovies"));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(v.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("user_id"),e.next=3,g()({url:"".concat(_,"movies"),method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token"),user_id:t}});case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("user_id"),e.next=3,g()({url:"".concat(_,"movies/addmovie"),method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},data:{title:t,year:a,user_id:n}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k={login:w,getAllMovies:O,getUsersMovies:j,updateMovie:function(){var e=Object(v.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"".concat(_,"movies/").concat(t),method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},data:{watched:a}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),deleteMovie:function(){var e=Object(v.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"".concat(_,"movies/").concat(t),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addMovie:y},S=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(v.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAllMovies();case 2:(t=e.sent)&&(a=Object(h.a)(new Set(t.map((function(e){return e.title})))).map((function(e){return t.find((function(t){return t.title===e}))})),c((function(e){return a})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:b.a.movies},r.a.createElement("h1",null,"Recommended Movies"),a.length>0?r.a.createElement("ul",null,a.map((function(e,t){return r.a.createElement("li",{className:b.a.li,key:t},r.a.createElement("h4",{className:b.a.h4},e.title),r.a.createElement("h4",{className:b.a.h4},e.year))}))):r.a.createElement("h3",null,"There are no movies to show."))},x=a(7),M=a.n(x),N=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){(function(){var e=Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getUsersMovies();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var d=function(){var e=Object(v.a)(p.a.mark((function e(t,n,r,o){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.stopPropagation(),e.next=4,k.updateMovie(n,r);case 4:200===(s=e.sent).status&&(c(a.map((function(e){return e.id===n?s.data.movie:e}))),m("Marked movie ".concat(o,r?" as watched":" as NOT watched"))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(v.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.stopPropagation(),e.next=4,k.deleteMovie(a);case 4:200===e.sent.status&&(m("Movie ".concat(n," deleted")),document.getElementById(a).remove()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m("Failed to delete ".concat(n));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,a.length>0?r.a.createElement("div",{className:M.a.container},r.a.createElement("h1",null,"My Movies"),r.a.createElement("h3",{className:M.a.message},u),r.a.createElement(l.b,{activeClassName:"active",to:{pathname:"/addmovies",state:{usersMovies:a}}},"Add Movies"),r.a.createElement("table",{className:M.a.movies},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Year"),r.a.createElement("th",null,"Watched"))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t,id:e.id},r.a.createElement("td",{className:e.watched?M.a.watched:""},e.title),r.a.createElement("td",{className:e.watched?M.a.watched:""},e.year),r.a.createElement("td",null,r.a.createElement("div",{className:e.watched?M.a.checkboxWatched:M.a.checkbox,onClick:function(t){var a=!e.watched,n=e.id;d(t,n,a,e.title)},id:"isWatched"},r.a.createElement("span",{id:"span".concat(e.id),className:e.watched?M.a.spanStyle:M.a.hidden},"\u2714"))),r.a.createElement("td",null,r.a.createElement("button",{className:"button delete-button",onClick:function(t){var a=e.id,n=e.title;h(t,a,n)}},"Delete")))}))))):r.a.createElement("div",null,r.a.createElement("h3",null,"You haven`t added any movie to the list."),r.a.createElement(l.b,{activeClassName:"active",to:{pathname:"/addmovies",state:{usersMovies:a}}},"Add Movies")))},C=a(19),T=a.n(C),I=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement("form",{className:T.a.search_container},r.a.createElement("input",{value:c,onChange:function(e){o(e.target.value)},type:"text",placeholder:"Title",className:T.a.input}),r.a.createElement("input",{className:T.a.button,onClick:function(t){t.preventDefault(),e.search(c),o("")},type:"submit",value:"Search"}))},P="4a3b711b",A=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),h=Object(s.a)(d,2),f=h[0],b=h[1],E=Object(n.useState)([]),g=Object(s.a)(E,2),_=g[0],w=g[1],O=Object(n.useState)(null),j=Object(s.a)(O,2),y=j[0],S=j[1],x=Object(n.useState)(!1),N=Object(s.a)(x,2),C=N[0],T=N[1],A=function(){var t=Object(v.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.location.state.usersMovies,c||u){t.next=5;break}return b("Please enter something"),t.abrupt("return");case 5:if(!n.some((function(e){var t=e.title,a=e.year;return t.toLowerCase()===c||t===c&&a===u}))){t.next=8;break}return b("Movie ".concat(c," already exists in your list")),t.abrupt("return");case 8:return t.next=10,k.addMovie(c,u);case 10:200===t.sent.status?b("Movie ".concat(c," added to your list")):b("Failed to add movie ".concat(c," to the list"));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add New Movie"),r.a.createElement("form",{method:"POST"},r.a.createElement("input",{type:"text",name:"title",placeholder:"Title",defaultValue:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{type:"text",name:"year",placeholder:"Year",onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{className:"button",onClick:A},"Add movie")),r.a.createElement("h3",{className:M.a.message},f),r.a.createElement("h3",null,"Or Search for the movie"),r.a.createElement(I,{search:function(e){T(!0),S(null),fetch("https://www.omdbapi.com/?s=".concat(e,"&apikey=").concat(P)).then((function(e){return e.json()})).then((function(e){"True"===e.Response?(w(e.Search),T(!1)):(S(e.Error),T(!1))}))}}),_?r.a.createElement("div",{className:M.a.results},C&&!y?r.a.createElement("span",null,"loading..."):y?r.a.createElement("div",{className:"errorMessage"},y):_.map((function(e,t){return r.a.createElement("div",{className:M.a.movie,key:"".concat(t,"-").concat(e.Title)},r.a.createElement("h4",null,e.Title),r.a.createElement("div",null,e.Poster?r.a.createElement("img",{width:"200",alt:"The movie titled: ".concat(e.Title),src:e.Poster}):r.a.createElement("img",{width:"200",alt:"The movie titled: ".concat(e.Title),src:"https://m.media-amazon.com/images/M/MV5BMTczNTI2ODUwOF5BMl5BanBnXkFtZTcwMTU0NTIzMw@@._V1_SX300.jpg"})),r.a.createElement("h4",null,e.Year),r.a.createElement("div",{className:M.a.divStyle,onClick:function(t){o(e.Title),m(e.Year),function(e,t){document.getElementById("span".concat(t)).classList.toggle("".concat(M.a.hidden))}(0,e.imdbID)},id:"isPicked"},r.a.createElement("span",{className:M.a.hidden,id:"span".concat(e.imdbID)},"\u2714")),r.a.createElement("button",{onClick:function(e){A(e)}},"Add movie"))}))):r.a.createElement("div",null,r.a.createElement("h2",null,y)))},L=function(e){var t=e.url,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(""),m=Object(s.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(!1),v=Object(s.a)(h,2),f=v[0],b=v[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Request a New Password"),f?r.a.createElement("div",null,r.a.createElement("h3",null,"WE emailed you the token to reset your password."),r.a.createElement(l.b,{to:"/createpassword"},"Create the new password here")):r.a.createElement("div",null,r.a.createElement("p",null,"It happens to the best of us. Enter your email and we'll send you reset instructions."),r.a.createElement("form",{method:"POST"},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",onChange:function(e){return i(e.target.value)}}),r.a.createElement("button",{onClick:function(e){b(!0),e.preventDefault(),o?fetch("".concat(t,"password/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}).then((function(e){200===e.status&&console.log(e.body.token)})):p("Invalid Data")}},"Request new password")),r.a.createElement(l.b,{to:"/login"},"I remember my passowrd")),d)},D=function(e){var t=e.url,a=Object(i.g)(),c=Object(n.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],h=d[1],v=Object(n.useState)(""),f=Object(s.a)(v,2),b=f[0],E=f[1],g=Object(n.useState)(""),_=Object(s.a)(g,2),w=_[0],O=_[1],j=Object(n.useState)(!1),y=Object(s.a)(j,2),k=y[0],S=y[1];return r.a.createElement("div",null,r.a.createElement("h3",null,"Create New Password"),r.a.createElement("form",{method:"POST"},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",onChange:function(e){return S(e.target.value)}}),r.a.createElement("input",{type:"text",name:"token",placeholder:"Token",onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}}),r.a.createElement("input",{type:"password",name:"repeatPassword",placeholder:"Repeat Password",onChange:function(e){return E(e.target.value)}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),b?fetch("".concat(t,"password/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:k,token:l,password:p,confirmPassword:b})}).then((function(e){200===e.status&&a.replace("/login")})):O("Invalid Data")}},"Submit")),r.a.createElement("h3",null,w))},B=a(23),z=a.n(B),F=function(e){var t=e.handleLoginClick,a=Object(i.g)(),c=Object(n.useState)(""),o=Object(s.a)(c,2),u=o[0],m=o[1],d=Object(n.useState)(""),h=Object(s.a)(d,2),f=h[0],b=h[1],E=Object(n.useState)(""),g=Object(s.a)(E,2),_=g[0],w=g[1],O=function(){var e=Object(v.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),u||f){e.next=4;break}return w("Please enter valid username and password"),e.abrupt("return");case 4:return e.prev=4,e.next=7,k.login(u,f);case 7:200===(r=e.sent).status&&(localStorage.setItem("token","Bearer ".concat(r.data.token)),localStorage.setItem("user_id",r.data.user_id),a.replace("/movies"),t()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),w("Invalid data");case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:z.a.container},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{method:"POST"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:function(e){return m(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:function(e){return b(e.target.value)}}),r.a.createElement("button",{className:"button",onClick:O},"Log in")),r.a.createElement(l.b,{to:"/passwordreset"},"Forgot Password?"),r.a.createElement("h2",{className:z.a.error},_))},W=a(12),R=a.n(W),q=function(e){var t=e.isAuth,a=e.handleLogoutClick;return r.a.createElement("nav",{className:R.a.menu},r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{className:R.a.a,activeClassName:R.a.active,to:"/",exact:!0},"Home"),r.a.createElement(l.b,{className:R.a.a,activeClassName:R.a.active,to:"/movies"},"My Movies"),t?r.a.createElement(l.b,{className:R.a.logoutA,to:"/movies",onClick:a},"Log out"):r.a.createElement(l.b,{className:R.a.a,activeClassName:R.a.active,to:"/login"},"Login")))};var H=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){localStorage.getItem("token")?c((function(e){return!0})):c((function(e){return!1}))}),[a]);var o=function(){c((function(e){return!0}))};return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(q,{handleLogoutClick:function(e){localStorage.removeItem("token"),localStorage.removeItem("user_id"),c((function(e){return!1}))},isAuth:a}),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:function(e){return r.a.createElement(S,e)}}),r.a.createElement(m,{exact:!0,path:"/movies",component:function(e){return r.a.createElement(N,e)}}),r.a.createElement(m,{exact:!0,path:"/addmovies",component:function(e){return r.a.createElement(A,e)}}),r.a.createElement(i.b,{exact:!0,path:"/passwordreset",component:function(e){return r.a.createElement(L,e)}}),r.a.createElement(i.b,{exact:!0,path:"/createpassword",component:function(e){return r.a.createElement(D,e)}}),r.a.createElement(i.b,{path:"/login",component:function(e){return r.a.createElement(F,Object.assign({},e,{handleLoginClick:o}))}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports={spanStyle:"Movies_spanStyle__Mt2tt",divStyle:"Movies_divStyle__2X8tP",checkbox:"Movies_checkbox__1lz1x",hidden:"Movies_hidden__3CWqB",movies:"Movies_movies__1hnrf",li:"Movies_li__3E3XP",h4:"Movies_h4__ZJNw4",results:"Movies_results__1M5uZ",movie:"Movies_movie__1NKhQ",addMovieLink:"Movies_addMovieLink__3RXel",container:"Movies_container__3Ixpt",message:"Movies_message__147qx",watched:"Movies_watched__p8id4",checkboxWatched:"Movies_checkboxWatched__2spUF"}}},[[38,1,2]]]);
//# sourceMappingURL=main.87c69e18.chunk.js.map